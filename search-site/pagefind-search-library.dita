<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="pathfind-search-library">
    <title>Pagefind Search Library</title>
    <body>
        <p><xref href="https://pagefind.app/" format="html" scope="external">Pagefind</xref> is a
            JavaScript static search library than be easily integrated into the DITA-Bootstrap
            plugin. As it is written in Javascript, it runs the searches in the browser, and
            consequently is very fast. It is the library that powers the search on this site.</p>
        <p>To install Pagefind you will need to have <codeph>npm</codeph> installed first. For
            instructions on how to install that, see <xref
                href="https://docs.npmjs.com/downloading-and-installing-node-js-and-npm"
                format="html" scope="external"/>.</p>
        <p>After you have installed <codeph>npm</codeph> (if you don't have it already), getting
            search fully up-and-running on your site involves the following steps:</p>
        <ol>
            <li>From the command line, run an ordinary build of your document using the
                DITA-Bootstrap plugin.</li>
            <li>Still in the command line, navigate to the output folder containing the HTML files
                and run the <codeph>pagefind</codeph>
                    command:<codeblock outputclass="language-markup">npx pagefind --source .</codeblock><p>This
                    creates a <codeph>_pagefind</codeph> folder within the output folder that
                    contains the search index for the document.</p></li>
            <li>Make a copy of the <codeph>[DITA-OT Install
                    Folder]/libexec/plugins/net.infotexture.dita-bootstrap/xsl/html5-bootstrap.xsl</codeph>file
                (rename it <codeph>html5-bootstrap.orig</codeph> or similar). This is so you can
                restore the original file if need be.</li>
            <li>The <xref href="https://pagefind.app/docs/ui/" format="html" scope="external"
                    >Pagefind UI</xref> page provides a code snippet that can be inserted into the
                    <codeph>html5-bootstrap.xsl</codeph> file (or other files like
                    <codeph>includes/bs-navbar-default.hdr.xml</codeph>). Insert it immediately
                before the content <codeph>&lt;div></codeph> in the the
                    <codeph>html5-bootstrap.xsl</codeph> file to display the search bar beneath the
                site header menu.<codeblock outputclass="language-xml">...

&lt;!--   Pagefind search snippet goes here   -->
      
      &lt;div class="container-fluid  py-4" id="search-wrapper" style="background-color: #cfe2ff;">
      &lt;link href="/_pagefind/pagefind-ui.css" rel="stylesheet"/>
      &lt;script src="/_pagefind/pagefind-ui.js" type="text/javascript">&lt;/script>
      
        &lt;div id="search" class="container-lg" style="max-width: 25%;">&lt;/div>
      &lt;script>
        window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search" });
        });
      &lt;/script>
      &lt;/div>
      
&lt;!--   End of pagefind snippet   -->
      
      &lt;div class="bs-container" id="content">

...</codeblock><p>In the above example I have wrapped the Pagefind code snippet in a
                        <codeph>&lt;div></codeph> and added some styling to the wrapper and the
                    search <codeph>&lt;div></codeph>.</p></li>
            <li>Navigate to the folder where your document ditamap is situated, and run another
                build.</li>
            <li>Move the output folder to a web server, and open a page to test the new search
                    functionality.<note type="tip">If you have Python 3 installed, you can spin up a
                    local web server in the document output folder using a command similar to the
                        following:<codeblock outputclass="language-bourne">python3 -m http.server 8000</codeblock><p>Your
                        content will be available at
                            <codeph>http://localhost:8000/&lt;mypage.html></codeph>.</p></note></li>
        </ol>
        <p>For a more in-depth look at Pagefind and what it can do, see the following video:</p>
        <object width="560" height="315" data="https://www.youtube.com/embed/74lsEXqRQys"
            outputclass="iframe">
            <param name="allowfullscreen" value="true"/>
        </object>
    </body>
</topic>
